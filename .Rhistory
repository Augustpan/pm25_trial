effect
effect %>% gather("stage", "change", effect = spread(biomarker_data, date, PGF) %>%
mutate(stage1 = .$`2020/11/8` - .$`2020/11/4`,
stage2 = .$`2020/11/16` - .$`2020/11/13`) %>%
select(subject, stage1, stage2) %>%
inner_join(treatment_data, by="subject"))
effect = spread(biomarker_data, date, PGF) %>%
mutate(stage1 = .$`2020/11/8` - .$`2020/11/4`,
stage2 = .$`2020/11/16` - .$`2020/11/13`) %>%
select(subject, stage1, stage2) %>%
inner_join(treatment_data, by="subject")
effect %>% gather("stage", "effect", 2:3)
effect = spread(biomarker_data, date, PGF) %>%
mutate(stage1 = .$`2020/11/8` - .$`2020/11/4`,
stage2 = .$`2020/11/16` - .$`2020/11/13`) %>%
select(subject, stage1, stage2) %>%
inner_join(treatment_data, by="subject") %>%
gather("stage", "effect", 2:3)
effect
effect = spread(biomarker_data, date, PGF) %>%
mutate(stage1 = .$`2020/11/8` - .$`2020/11/4`,
stage2 = .$`2020/11/16` - .$`2020/11/13`) %>%
select(subject, stage1, stage2)
effect
source('~/Desktop/pm25_trial/analysis.R')
effect
source('~/Desktop/pm25_trial/analysis.R')
calc_average(pm_data, doi1, lag)
source('~/Desktop/pm25_trial/analysis.R')
calc_average(pm_data, doi1, lag)
source('~/Desktop/pm25_trial/analysis.R')
calc_average(pm_data, doi1, lag)
calc_average(pm_data, doi2, lag)
calc_average(pm_data, doi1, lag) %>%
mutate(stage = "stage1")
source('~/Desktop/pm25_trial/analysis.R')
pm
effect
inner_join(effect, pm, by=c("subject", "stage"))
source('~/Desktop/pm25_trial/analysis.R')
effect
lm(effect ~ stage + treatment + pm25,data=effect)
lm(effect ~ stage + treatment + pm25,data=effect) %>% summary()
aov(effect ~ stage + treatment, data=effect)
effect
aov(effect ~ stage + treatment + subject, data=effect)
aov(effect ~ stage + treatment + subject, data=effect) %>% summary()
source('~/Desktop/pm25_trial/analysis.R')
effect
aov(effect ~ stage + sequence + subject, data=effect) %>% summary()
library(lme4)
library(nlme)
nlme(effect ~ pm25 + pm10 + sequence + (1|subject), data=effect)
lmer(effect ~ pm25 + pm10 + sequence + (1|subject), data=effect)
lmer(effect ~ pm25 + pm10 + sequence + stage + (1|subject), data=effect)
lmer(effect ~ pm25 + sequence + stage + (1|subject), data=effect)
fit = lmer(effect ~ pm25 + sequence + stage + (1|subject), data=effect)
fit
source('~/Desktop/pm25_trial/analysis.R')
fit
summary(fit)
fit = lmer(effect ~ pm25*stage + sequence + (1|subject), data=effect)
fit
summary(fit)
fit = lmer(effect ~ pm25*stage + pm25*sequence + (1|subject), data=effect)
fit
summary(fit)
fit = lmer(effect ~ pm25 + stage + sequence + (1|subject), data=effect)
fit
lm(effect ~ pm25 + sequence, data=effect%>%filter(stage=="stage1"))
lm(effect ~ pm25 + sequence, data=effect%>%filter(stage=="stage1")) %>% summary()
lm(effect ~ pm25 + sequence, data=effect%>%filter(stage=="stage2")) %>% summary()
source('~/Desktop/pm25_trial/analysis.R')
aov(delta ~ pm25 + stage + sequence, data=effect)
aov(delta ~ pm25 + stage + sequence, data=effect) %>% summary()
effect$delta
qplot(effect$delta)
effect
spread(biomarker_data, date, PGF) %>%
mutate(stage1 = .$`2020/11/8` - .$`2020/11/4`,
stage2 = .$`2020/11/16` - .$`2020/11/13`) %>%
select(subject, stage1, stage2) %>%
inner_join(treatment_data, by="subject") %>%
gather("stage", "delta", 2:3) %>%
inner_join(pm, by=c("subject", "stage")) %>%
mutate(treatment = stage=="stage1"&sequence=="A")
effect = spread(biomarker_data, date, PGF) %>%
mutate(stage1 = .$`2020/11/8` - .$`2020/11/4`,
stage2 = .$`2020/11/16` - .$`2020/11/13`) %>%
select(subject, stage1, stage2) %>%
inner_join(treatment_data, by="subject") %>%
gather("stage", "delta", 2:3) %>%
inner_join(pm, by=c("subject", "stage")) %>%
mutate(treatment = (stage=="stage1"&sequence=="A")|(stage=="stage2"&sequence=="B"))
effect
effect = spread(biomarker_data, date, PGF) %>%
mutate(stage1 = .$`2020/11/8` - .$`2020/11/4`,
stage2 = .$`2020/11/16` - .$`2020/11/13`) %>%
select(subject, stage1, stage2) %>%
inner_join(treatment_data, by="subject") %>%
gather("stage", "delta", 2:3) %>%
mutate(treatment = (stage=="stage1"&sequence=="A")|(stage=="stage2"&sequence=="B")) %>%
inner_join(pm, by=c("subject", "stage"))
effect
source('~/Desktop/pm25_trial/analysis.R')
effect
aov(delta ~ pm25 + stage + treatment, data=effect)
aov(delta ~ pm25 + stage + treatment, data=effect) %>% summary()
aov(delta ~ subject + stage + treatment, data=effect)
aov(delta ~ subject + stage + treatment, data=effect) %>% summary()
effect
effect %>% na.omit()
aov(delta ~ subject + stage + treatment, data=effect) %>% summary()
shapiro.test(delta)
shapiro.test(effect$delta)
lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==T))
lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==T)) %>% summary()
lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==F)) %>% summary()
source('~/Desktop/pm25_trial/analysis.R')
lmer(delta ~ pm25 + stage + treatment + (1|subject), data=effect)
fit = lmer(delta ~ pm25 + stage + treatment + (1|subject), data=effect)
fit %>% summary()
source('~/Desktop/pm25_trial/analysis.R')
fit = lmer(delta ~ (pm25/subject) + stage + treatment + (1|subject), data=effect)
fit = lmer(delta ~ stage + treatment + (1/subject), data=effect)
fit = lmer(delta ~ stage + treatment + (1|subject), data=effect)
fit = lmer(delta ~ pm25 + stage + treatment + (1|subject), data=effect)
fit = lmer(delta ~ (pm25|treatment) + stage + treatment + (1|subject), data=effect)
fit
fit = lmer(delta ~ pm25 + stage + (1|subject), data=filter(effect, treatment==T))
fit = lm(delta ~ pm25 + stage, data=filter(effect, treatment==T))
summary(fit)
lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==T))
lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==F))
lmer(delta ~ pm25 + stage + treatment + (1|subject), data=effect) %>% summary()
lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==F)) %>% summary()
source('~/Desktop/pm25_trial/analysis.R')
source('~/Desktop/pm25_trial/analysis.R')
effect
source('~/Desktop/pm25_trial/analysis.R')
lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==T)) %>% summary()
source('~/Desktop/pm25_trial/analysis.R')
lmer(delta ~ (pm25|treatment) + stage + treatment + (1|subject), data=effect) %>% summary()
fit = lmer(delta ~ (pm25|treatment) + stage + treatment + (1|subject), data=effect)
plot(fit)
fit = lmer(delta ~ pm25 + stage + treatment + (1|subject), data=effect)
plot(fit)
fit = lmer(delta ~ (pm25|treatment) + stage + treatment + (1|subject), data=effect)
fit
summary(fit)
lmer(delta ~ treatment + stage + (1|subject), data=effect %>% filter(sequence=="A"))
lmer(delta ~ pm25 + treatment + stage + (1|subject), data=effect %>% filter(sequence=="A"))
lmer(delta ~ pm25 + treatment + (1|subject), data=effect %>% filter(sequence=="A"))
lmer(delta ~ pm25 + treatment + (1|subject), data=effect %>% filter(sequence=="B"))
lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==T)) %>% summary()
aov(delta ~ subject + stage + treatment, data=effect) %>% summary()
effect
spread(effect, stage, delta)
effect %>% select(subjcet, sequence, stage, delta)
effect %>% select(subjcet, sequence, stage, delta)
effect %>% select(subjcet)
effect %>% select(subject, sequence, stage, delta)
effect %>% select(subject, sequence, stage, delta) %>% spread(stage, delta)
x = effect %>% select(subject, sequence, stage, delta) %>% spread(stage, delta)
x
xa = x%>%filter(sequence=="A")
xb = x%>%filter(sequence=="B")
xa
s1 = c(xa$stage1, xb$stage2)
s2 = c(xa$stage2, xb$stage1)
s1
s2
x = na.omit(x)
s1 = c(xa$stage1, xb$stage2)
s2 = c(xa$stage2, xb$stage1)
是
s1
s2
xa = x%>%filter(sequence=="A")
xb = x%>%filter(sequence=="B")
s1 = c(xa$stage1, xb$stage2)
s2 = c(xa$stage2, xb$stage1)
是
s1
s2
t.test(s1, s2, paired = T)
qplot(s1)
qplot(s2)
s1
shapiro.test(s1)
shapiro.test(s1)
shapiro.test(s2)
shapiro.test(s2-s1)
qplot(s2-s1)
qplot(s2-s1, bins=10)
qplot(s2-s1, bins=20)
lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==T))
fit= lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==T))
plot(fit)
effect %>% filter(treatment==T)
X =  effect %>% filter(treatment==T)
View(X)
fit = lmer(delta ~ (pm25|treatment) stage + treatment + (1|subject), data=effect)
fit = lmer(delta ~ stage + treatment + (pm25|treatment) + (1|subject), data=effect)
coef(fit)
?isSingular
fit1 = lmer(delta ~ stage + treatment + (pm25|treatment) + (1|subject), data=effect)
fit2 = lmer(delta ~ stage + treatment + pm25 + (1|subject), data=effect)
anova(fit1, fit2)
fit1 = lmer(delta ~ stage + treatment + (1|subject), data=effect)
fit2 = lmer(delta ~ stage + treatment + pm25 + (1|subject), data=effect)
fit3 = lmer(delta ~ stage + treatment + (pm25|treatment) + (1|subject), data=effect)
anova(fit1, fit2, fit3)
fit1
summary(fit1)
lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==T)) %>% summary()
fit_trt = lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==T))
fit_crtl = lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==F))
tidy(fit_trt)
tidy(trt_crtl)
library(broom)
fit_trt = lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==T))
fit_crtl = lm(delta ~ pm25 + stage, data = effect %>% filter(treatment==F))
tidy(fit_trt)
tidy(trt_crtl)
tidy(fit_crtl)
tidy(fit_trt)[2,]
bind_rows(tidy(fit_trt)[2,], tidy(fit_crtl)[2,])
summ$term = c("pm25_treat", "pm25_control")
summ = bind_rows(tidy(fit_trt)[2,], tidy(fit_crtl)[2,])
summ$term = c("pm25_treat", "pm25_control")
summ
ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1)
ggplot(summ) +
geom_point(aes(x=term, y=estimate))
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1)
ggplot(summ, aes(x=term, y=estimate)) +
geom_point()
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1)
ggplot(summ, aes(x=term, y=estimate)) +
geom_point() +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1)
ggplot(summ) +
geom_point(aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1)
ggplot(summ, aes(x=term, y=estimate)) +
geom_point() +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1)
source('~/Desktop/pm25_trial/analysis.R')
ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
theme_pubr()
source('~/Desktop/pm25_trial/analysis.R')
ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
theme_pubr()
summ$term = c("treatment", "control")
ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
theme_pubr()
summ$term = c("Treatment", "Control")
ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
theme_pubr()
ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
ylab("Estimated effect of PM2.5") +
xlab("") +
theme_pubr()
ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
ylab("Estimated effect PM2.5") +
xlab("") +
theme_pubr()
ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
ylab("Estimated effect of PM2.5") +
xlab("") +
theme_pubr()
plot_effect_size = ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
ylab("Estimated effect of PM2.5") +
xlab("") +
theme_pubr()
ggsave("result/effect_size.jpg", plot=plot_effect_size)
plot_effect_size = ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
geom_hline(aes(yintercept=0)) +
ylab("Estimated effect of PM2.5") +
xlab("") +
theme_pubr()
ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
geom_hline(aes(yintercept=0)) +
ylab("Estimated effect of PM2.5") +
xlab("") +
theme_pubr()
ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
geom_hline(aes(yintercept=0), linetype="dashed") +
ylab("Estimated effect of PM2.5") +
xlab("") +
theme_pubr()
plot_effect_size = ggplot(summ, aes(x=term, y=estimate)) +
geom_errorbar(aes(ymin=estimate-std.error, ymax=estimate+std.error), width=.1) +
geom_point() +
geom_hline(aes(yintercept=0), linetype="dashed") +
ylab("Estimated effect of PM2.5") +
xlab("") +
theme_pubr()
ggsave("result/effect_size.jpg", plot=plot_effect_size)
temp = effect %>%
select(subject, sequence, stage, delta) %>%
spread(stage, delta) %>%
na.omit()
xa = temp %>% filter(sequence=="A")
xb = temp %>% filter(sequence=="B")
s1 = c(xa$stage1, xb$stage2)
s2 = c(xa$stage2, xb$stage1)
t.test(s1, s2, paired = T)
t.test(s1, s2, paired = T)
是
s1 = c(xa$stage1, xb$stage2)
s2 = c(xa$stage2, xb$stage1)
tdf = bind_rows(tibble(s=s1, g="s1"), tibble(s=s2, g="s2"))
tdf
qplot(x=g, y=s, data=tdf)
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
stat_compare_means(method="t.test", paired=T) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
stat_compare_means(method="t.test", paired=T, ;label = "p.signif") +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
stat_compare_means(method="t.test", paired=T, label = "p.signif") +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
stat_compare_means(method="t.test", paired=T) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_point() +
stat_compare_means(method="t.test", paired=T) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
stat_compare_means(method="t.test", paired=T) +
theme_pubr()
tdf = bind_rows(tibble(s=s1, g="Treatment"), tibble(s=s2, g="Control"))
t.test(s1, s2, paired = T)
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
stat_compare_means(method="t.test", paired=T) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
stat_compare_means(method="t.test", paired=T, label.x = 1) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
stat_compare_means(method="t.test", paired=T, label.x = 2) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
stat_compare_means(method="t.test", paired=T, label.x = 1.5) +
theme_pubr()
t.test(s1, s2, paired = T)
tt = t.test(s1, s2, paired = T)
tt$p.value
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
stat_compare_means(method="t.test", paired=T, label = paste0("paired t test p = ", tt$p.value), label.x = 1.5) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.5, y= 120, label=paste0("paired t test p = ", tt$p.value)) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.5, y= 120, label=paste0("paired t test p = ",(round(tt$p.value*1000)/1000))) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.5, y= 120, label=paste0("paired t test p = ",(round(tt$p.value*10000)/10000))) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.5, y= 120, label=paste0("paired t test, p = ",(round(tt$p.value*10000)/10000))) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.7, y= 120, label=paste0("paired t test, p = ",(round(tt$p.value*10000)/10000))) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.9, y= 120, label=paste0("paired t test, p = ",(round(tt$p.value*10000)/10000))) +
theme_pubr()
ggplot(tdf, aes(x=g, y=s)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.9, y= 120, label=paste0("paired t test p = ",(round(tt$p.value*10000)/10000))) +
theme_pubr()
tdf = bind_rows(tibble(delta=s1, group="Treatment"), tibble(delta=s2, group="Control"))
t.test(s1, s2, paired = T)
ggplot(tdf, aes(x=group, y=delta)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.9, y= 120, label=paste0("paired t test p = ",(round(tt$p.value*10000)/10000))) +
theme_pubr()
ggplot(tdf, aes(x=group, y=delta)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.9, y= 120, label=paste0("paired t test p = ",(round(tt$p.value*10000)/10000))) +
xlab("") +
ylab("Change in uric 8-iso")
ggplot(tdf, aes(x=group, y=delta)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.9, y= 120, label=paste0("paired t test p = ",(round(tt$p.value*10000)/10000))) +
xlab("") +
ylab("Change in uric 8-iso PGF")
ggplot(tdf, aes(x=group, y=delta)) +
geom_boxplot() +
geom_jitter() +
geom_text(x=1.9, y= 120, label=paste0("paired t test p = ",(round(tt$p.value*10000)/10000))) +
xlab("") +
ylab("Change in uric 8-iso PGF") +
theme_pubr()
aov(delta ~ subject + stage + treatment, data=effect) %>% summary()
r_anova = aov(delta ~ subject + stage + treatment, data=effect)
tidy(r_anova)
anova(fit1, fit2, fit3)
source('~/Desktop/pm25_trial/analysis.R')
source('~/Desktop/pm25_trial/analysis.R')
tidy(r_anova)
source('~/Desktop/pm25_trial/analysis.R')
source('~/Desktop/pm25_trial/std_curve.R')
ggplot() +
geom_point(aes(x=x_AC, y=log(c_std))) +
geom_smooth(aes(x=x_AC, y=log(c_std)), method="lm", se=F) +
geom_text(aes(hjust=0, x=0.6, y=4.5, label=paste0("R-square=", round(fit_AC$r.squared*10000)/10000))) +
geom_text(aes(hjust=0, x=0.6, y=4.7, label=paste0("ln(y) = ", round(fit_AC$coefficients[1]*10000)/10000, " + ", round(fit_AC$coefficients[2]*10000)/10000, " * x"
))) +
xlab("O.D.") +
ylab("ln(8-iso)") +
ggpubr::theme_pubr()
ggplot() +
geom_point(aes(x=x_AC, y=log(c_std))) +
geom_smooth(aes(x=x_AC, y=log(c_std)), method="lm", se=F, color="black") +
geom_text(aes(hjust=0, x=0.6, y=4.5, label=paste0("R-square=", round(fit_AC$r.squared*10000)/10000))) +
geom_text(aes(hjust=0, x=0.6, y=4.7, label=paste0("ln(y) = ", round(fit_AC$coefficients[1]*10000)/10000, " + ", round(fit_AC$coefficients[2]*10000)/10000, " * x"
))) +
xlab("O.D.") +
ylab("ln(8-iso)") +
ggpubr::theme_pubr()
source('~/Desktop/pm25_trial/std_curve.R')
source('~/Desktop/pm25_trial/analysis.R')
baseline = read_csv("data/baseline.csv")
source('~/Desktop/pm25_trial/analysis.R')
baseline
View(baseline)
baseline = read_csv("data/baseline.csv")
baseline$dob
baseline$dob = as.Date(tdf$date, "%y/%m/%d")
as.Date(baseline$dob, "%y/%m/%d")
as.Date(baseline$dob, "%Y/%m/%d")
baseline$dob = as.Date(baseline$dob, "%Y/%m/%d")
baseline
Sys.time() - baseline$dob
baseline$dob = as.Date(baseline$dob, "%Y/%m/%d") %>% as.POSIXct()
baseline
baseline$dob
Sys.time() - baseline$dob
difftime(Sys.time(), baseline$dobm, units = "year")
difftime(Sys.time(), baseline$dob, units = "year")
difftime(Sys.time(), baseline$dob, units = "days")
difftime(Sys.time(), baseline$dob, units = "days") / 365
baseline$age = difftime(Sys.time(), baseline$dob, units = "days") / 365
baseline$age
